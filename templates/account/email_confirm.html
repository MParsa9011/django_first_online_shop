{% extends "_base.html" %}
{% load i18n %}
{% load account %}
{% load allauth %}

{% block head_title %}
    {% trans "Confirm Email Address" %}
{% endblock head_title %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-100 to-gray-50 px-4">
    <div class="max-w-md w-full bg-white shadow-2xl rounded-3xl p-10 border border-gray-200 transform -translate-y-4">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-center text-gray-900 mb-6">
            {% trans "Confirm Your Email" %}
        </h1>

        {% if confirmation %}
            {% user_display confirmation.email_address.user as user_display %}
            {% if can_confirm %}
                <!-- Info -->
                <p class="text-gray-700 text-center mb-8 leading-relaxed">
                    {% blocktrans with confirmation.email_address.email as email %}
                        Please confirm that 
                        <a href="mailto:{{ email }}" class="text-blue-600 font-semibold hover:underline">{{ email }}</a>
                        is the email address for user 
                        <span class="font-medium text-gray-900">{{ user_display }}</span>.
                    {% endblocktrans %}
                </p>

                <!-- Confirm Button -->
                {% url 'account_confirm_email' confirmation.key as action_url %}
                <form method="post" action="{{ action_url }}" class="flex flex-col items-center gap-4 w-full">
                    {% csrf_token %}
                    {{ redirect_field }}
                    <button type="submit"
                        class="w-full py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold shadow-lg hover:from-blue-600 hover:to-blue-700 transition duration-300">
                        {% trans "Confirm Email" %}
                    </button>
                </form>

                <p class="mt-4 text-sm text-gray-500 text-center">
                    {% trans "If you did not request this, you can safely ignore this email." %}
                </p>

            {% else %}
                <div class="text-center text-red-700 bg-red-50 border border-red-200 rounded-2xl p-4 font-medium">
                    {% blocktrans %}
                        This email is already confirmed by a different account.
                    {% endblocktrans %}
                </div>
            {% endif %}
        {% else %}
            {% url 'account_email' as email_url %}
            <div class="text-center text-yellow-800 bg-yellow-50 border border-yellow-200 rounded-2xl p-5 font-medium">
                {% blocktrans %}
                    This email confirmation link has expired or is invalid.
                    Please <a href="{{ email_url }}" class="text-yellow-600 hover:underline font-semibold">
                        request a new confirmation
                    </a>.
                {% endblocktrans %}
            </div>
        {% endif %}
    </div>
</div>
{% endblock content %}
